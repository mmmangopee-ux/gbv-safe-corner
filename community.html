<!DOCTYPE html>
<html>
<head>
    <title>Community Support - GBV Safe Corner</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6A0DAD">
    
    <!-- ANALYTICS INTEGRATED -->
    <script src="analytics.js"></script>
    <script src="navigation.js"></script>
    
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: Arial, sans-serif; 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 20px; 
            background-color: #f8f8f8; 
            line-height: 1.6; 
        }
        .header { 
            background: linear-gradient(135deg, #6A0DAD, #8A2BE2);
            color: white; 
            padding: 30px; 
            text-align: center; 
            border-radius: 15px; 
            margin-bottom: 20px; 
        }
        .logo-text {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
            line-height: 1.2;
            margin-bottom: 10px;
        }
        .logo-text span {
            display: block;
        }
        
        .content-section { 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            margin: 25px 0; 
            box-shadow: 0 4px 8px rgba(106, 13, 173, 0.1);
        }
        .question-box { 
            background: #FFF3CD; 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 8px; 
            border-left: 4px solid #ffc107;
            transition: all 0.3s ease;
        }
        .question-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.2);
        }
        .advice-box { 
            background: #f0f8f0; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
            border-left: 4px solid #4CAF50;
            transition: all 0.3s ease;
        }
        .advice-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);
        }
        .submit-btn { 
            background: #6A0DAD; 
            color: white; 
            padding: 12px 30px; 
            text-decoration: none; 
            border-radius: 5px; 
            display: inline-block; 
            margin-top: 10px; 
            transition: all 0.3s ease;
            border: 2px solid #6A0DAD;
            font-weight: bold;
        }
        .submit-btn:hover {
            background: #8A2BE2;
            border-color: #8A2BE2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(106, 13, 173, 0.3);
        }
        .community-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }
        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #6A0DAD;
            display: block;
        }
        .stat-label {
            font-size: 0.9em;
            color: #666;
        }
        .guidelines {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        .interaction-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .interaction-btn {
            background: transparent;
            border: 1px solid #6A0DAD;
            color: #6A0DAD;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        .interaction-btn:hover {
            background: #6A0DAD;
            color: white;
        }
        .helpful-count {
            font-size: 12px;
            color: #666;
            margin-left: 5px;
        }
        
        /* Enhanced Emergency Exit */
        .emergency-exit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10000;
        }
        .emergency-exit-btn {
            background: #FF6B6B;
            color: white;
            padding: 12px 18px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255,0,0,0.4);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .emergency-exit-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(255,0,0,0.5);
        }
        
        /* Language Selector */
        #languageSelector {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            padding: 8px 12px;
            border-radius: 5px;
            border: 2px solid #6A0DAD;
            background: white;
            color: #6A0DAD;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #languageSelector:hover {
            background: #6A0DAD;
            color: white;
        }
        
        /* Accessibility */
        :focus {
            outline: 3px solid #6A0DAD;
            outline-offset: 2px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .community-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .interaction-buttons {
                flex-direction: column;
            }
            
            .interaction-btn {
                width: 100%;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-text">
            <span>GBV</span>
            <span>SAFE</span>
            <span>CORNER</span>
        </div>
        <p>Community Support & Advice</p>
    </div>

    <!-- Navigation auto-loaded here -->

    <div class="content-section">
        <h2>üí¨ Ask the Community</h2>
        <p>Have a question? Need advice? Looking for support from people who understand? Our community is here to help in a safe, anonymous space.</p>
        
        <div class="community-stats">
            <div class="stat-item">
                <span class="stat-number">1,247+</span>
                <span class="stat-label">Community Members</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">589</span>
                <span class="stat-label">Questions Answered</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">24/7</span>
                <span class="stat-label">Peer Support</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">100%</span>
                <span class="stat-label">Anonymous</span>
            </div>
        </div>

        <div class="question-box">
            <p><strong>Submit your question anonymously:</strong></p>
            <p><em>We're building our community Q&A system. For now, you can share your questions through our Stories page, and our community will respond with support and advice.</em></p>
            <a href="stories.html" class="submit-btn" style="text-decoration: none; display: inline-block;">Share Your Question</a>
        </div>

        <div class="guidelines">
            <h4>üè∑Ô∏è Community Guidelines</h4>
            <ul>
                <li><strong>Respect everyone</strong> - We're all here for support</li>
                <li><strong>Maintain anonymity</strong> - Don't share personal information</li>
                <li><strong>Offer constructive support</strong> - Be kind and helpful</li>
                <li><strong>No judgment</strong> - This is a safe space for sharing</li>
                <li><strong>Trigger warnings</strong> - Mark sensitive content appropriately</li>
            </ul>
        </div>
    </div>

    <div class="content-section">
        <h2>üåü Community Q&A</h2>
        <p>Real questions from our community with supportive responses. All posts are completely anonymous.</p>
        
        <div class="question-box">
            <p><strong>Anonymous:</strong> "How do I deal with seeing my abuser regularly? It's triggering and I feel unsafe, especially at work events where we both have to attend."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">24</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú I understand</button>
            </div>
        </div>
        <div class="advice-box">
            <p><strong>Community Advice:</strong> "That sounds really difficult. Have you considered talking to HR or security about creating distance? Also, having a 'buddy system' with a trusted colleague might help. You deserve to feel safe in your workplace."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">18</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú Good advice</button>
            </div>
        </div>

        <div class="question-box">
            <p><strong>Anonymous:</strong> "I'm struggling with guilt and shame after what happened. How do others cope with these feelings? I feel like it was my fault."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">42</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú I understand</button>
            </div>
        </div>
        <div class="advice-box">
            <p><strong>Community Support:</strong> "The shame belongs to the perpetrator, never the survivor. Many of us feel this way. Talking to a counselor helped me separate what happened from who I am. Remember: you survived, and that makes you incredibly strong."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">35</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú Good advice</button>
            </div>
        </div>

        <div class="question-box">
            <p><strong>Anonymous:</strong> "What are some grounding techniques for when I feel overwhelmed or triggered? Sometimes I feel like I'm back in that moment."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">31</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú I understand</button>
            </div>
        </div>
        <div class="advice-box">
            <p><strong>Community Tips:</strong> "The 5-4-3-2-1 method helps me: Name 5 things you see, 4 things you feel, 3 things you hear, 2 things you smell, 1 thing you taste. Also, carrying a small comforting object like a smooth stone helps ground me in the present."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">28</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú Good advice</button>
            </div>
        </div>

        <div class="question-box">
            <p><strong>Anonymous:</strong> "How do I support a friend who's experiencing GBV without overstepping or making things worse?"</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">19</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú I understand</button>
            </div>
        </div>
        <div class="advice-box">
            <p><strong>Community Advice:</strong> "Listen without judgment, believe them without question, and offer resources without pressure. Let them lead the conversation. Sometimes just saying 'I'm here for you' and meaning it is the most powerful support you can offer."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">22</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú Good advice</button>
            </div>
        </div>

        <div class="question-box">
            <p><strong>Anonymous:</strong> "I left my abusive situation but now I feel so lonely and isolated. How do I rebuild my social life and trust people again?"</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">27</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú I understand</button>
            </div>
        </div>
        <div class="advice-box">
            <p><strong>Community Support:</strong> "This is so common and completely understandable. Start small - maybe join a support group (virtual or in-person) where people understand. Reconnect with old friends gradually. Remember that rebuilding trust takes time, and it's okay to set boundaries."</p>
            <div class="interaction-buttons">
                <button class="interaction-btn" onclick="markHelpful(this)">üëç Helpful <span class="helpful-count">16</span></button>
                <button class="interaction-btn" onclick="showSupport(this)">üíú Good advice</button>
            </div>
        </div>
    </div>

    <div class="content-section">
        <h2>ü§ù Community Resources</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                <h4>üìö Support Groups</h4>
                <p>Join anonymous online support groups moderated by trained facilitators.</p>
            </div>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                <h4>üí¨ Peer Mentoring</h4>
                <p>Connect with survivors who have been through similar experiences.</p>
            </div>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                <h4>üõ°Ô∏è Safety Planning</h4>
                <p>Community-shared safety strategies and emergency plans.</p>
            </div>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                <h4>üåü Healing Stories</h4>
                <p>Read and share stories of recovery and resilience.</p>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Security & Privacy
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.pathname);
        }
        
        // Enhanced Emergency Exit
        document.addEventListener('DOMContentLoaded', function() {
            // Create emergency exit button
            const emergencyExit = document.createElement('div');
            emergencyExit.className = 'emergency-exit';
            emergencyExit.innerHTML = `
                <button onclick="emergencyRedirect()" 
                        title="Quickly leaves this site and clears data"
                        class="emergency-exit-btn">
                    üö® Quick Exit
                </button>
            `;
            document.body.appendChild(emergencyExit);

            // Enhanced emergency redirect
            window.emergencyRedirect = function() {
                // Clear sensitive data
                localStorage.removeItem('safetyPlanProgress');
                sessionStorage.clear();
                document.querySelectorAll('input, textarea').forEach(element => {
                    element.value = '';
                });
                // Redirect to safe page
                window.location.href = 'https://www.google.com/search?q=weather';
            };

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' || (e.ctrlKey && e.key === 'q')) {
                    emergencyRedirect();
                }
            });
            
            // Create Language Selector
            const languageSelector = document.createElement('select');
            languageSelector.id = 'languageSelector';
            languageSelector.innerHTML = `
                <option value="en">English</option>
                <option value="zu">Zulu</option>
                <option value="xh">Xhosa</option>
                <option value="af">Afrikaans</option>
            `;
            languageSelector.onchange = (e) => changeLanguage(e.target.value);
            document.body.appendChild(languageSelector);
            
            // Initialize language
            const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
            changeLanguage(savedLanguage);
            
            // ANALYTICS TRACKING - INTEGRATED
            if (typeof analytics !== 'undefined') {
                analytics.trackPageView('community.html');
                analytics.trackFeatureUse('community_loaded');
            }
        });
        
        // Language Support
        const translations = {
            en: {
                'home': 'Home',
                'report': 'Report',
                'support': 'Support',
                'stories': 'Stories',
                'library': 'Resources',
                'community': 'Community',
                'events': 'Events',
                'about': 'About',
                'safety': 'Safety',
                'assessment': 'Risk Check',
                'education': 'Education',
                'login': 'Admin'
            },
            zu: {
                'home': 'Ikhaya',
                'report': 'Bika',
                'support': 'Usizo',
                'stories': 'Izindaba',
                'library': 'Izinsiza',
                'community': 'Umphakathi',
                'events': 'Imicimbi',
                'about': 'Mayelana',
                'safety': 'Ukuphepha',
                'assessment': 'Ukuhlola',
                'education': 'Imfundo',
                'login': 'Admin'
            },
            xh: {
                'home': 'Ekhaya',
                'report': 'Xela',
                'support': 'Uncedo',
                'stories': 'Iimbali',
                'library': 'Iindlela',
                'community': 'Uluntu',
                'events': 'Iivenkile',
                'about': 'Malunga',
                'safety': 'Ukhuseleko',
                'assessment': 'Uvavanyo',
                'education': 'Imfundo',
                'login': 'Admin'
            },
            af: {
                'home': 'Tuis',
                'report': 'Rapporteer',
                'support': 'Ondersteuning',
                'stories': 'Stories',
                'library': 'Hulpbronne',
                'community': 'Gemeenskap',
                'events': 'Gebeure',
                'about': 'Oor',
                'safety': 'Veiligheid',
                'assessment': 'Risiko',
                'education': 'Onderrig',
                'login': 'Admin'
            }
        };

        let currentLanguage = 'en';

        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('preferredLanguage', lang);
            applyTranslations();
            updateLanguageSelector();
        }

        function applyTranslations() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }

        function updateLanguageSelector() {
            const selector = document.getElementById('languageSelector');
            if (selector) {
                selector.value = currentLanguage;
            }
        }

        // Community interaction functions
        function markHelpful(button) {
            const countSpan = button.querySelector('.helpful-count');
            let count = parseInt(countSpan.textContent) || 0;
            count++;
            countSpan.textContent = count;
            
            button.style.background = '#6A0DAD';
            button.style.color = 'white';
            button.disabled = true;
            
            // ANALYTICS TRACKING
            if (typeof analytics !== 'undefined') {
                analytics.trackFeatureUse('community_helpful_clicked');
            }
        }

        function showSupport(button) {
            button.style.background = '#8A2BE2';
            button.style.color = 'white';
            button.disabled = true;
            
            // Show temporary feedback
            const originalText = button.textContent;
            button.textContent = 'üíú Thank you for your support';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '';
                button.style.color = '';
                button.disabled = false;
            }, 2000);
            
            // ANALYTICS TRACKING
            if (typeof analytics !== 'undefined') {
                analytics.trackFeatureUse('community_support_clicked');
            }
        }

        // Track question views for community engagement
        document.addEventListener('DOMContentLoaded', function() {
            const questions = document.querySelectorAll('.question-box');
            questions.forEach((question, index) => {
                // Simulate question viewing tracking
                setTimeout(() => {
                    if (typeof analytics !== 'undefined') {
                        analytics.trackFeatureUse('community_question_viewed_' + (index + 1));
                    }
                }, 1000 * (index + 1));
            });
        });
    </script>
</body>
</html>
