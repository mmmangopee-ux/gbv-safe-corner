<div class="event-form">
    <form id="eventForm">
        <div class="form-group">
            <label for="eventName">Event Name *</label>
            <input type="text" id="eventName" name="eventName" required>
        </div>

        <div class="form-group">
            <label for="eventType">Event Type *</label>
            <select id="eventType" name="eventType" required>
                <option value="">Select type...</option>
                <option value="march">March/Protest</option>
                <option value="vigil">Vigil</option>
                <option value="workshop">Workshop</option>
                <option value="support_group">Support Group</option>
                <option value="awareness">Awareness Campaign</option>
            </select>
        </div>

        <div class="form-group">
            <label for="eventDate">Event Date *</label>
            <input type="datetime-local" id="eventDate" name="eventDate" required>
        </div>

        <div class="form-group">
            <label for="location">Location *</label>
            <input type="text" id="location" name="location" placeholder="Physical address or online" required>
        </div>

        <div class="form-group">
            <label for="description">Event Description *</label>
            <textarea id="description" name="description" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label for="organizerContact">Organizer Contact (Email) *</label>
            <input type="email" id="organizerContact" name="organizerContact" required>
        </div>

        <button type="submit" class="submit-btn">Submit Event</button>
    </form>
</div>

<script>
    document.getElementById('eventForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const eventData = {
            event_name: formData.get('eventName'),
            event_type: formData.get('eventType'),
            event_date: formData.get('eventDate'),
            location: formData.get('location'),
            description: formData.get('description'),
            organizer_contact: formData.get('organizerContact')
        };

        try {
            const response = await fetch(SUPABASE_URL + '/rest/v1/gbv_events', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'apikey': SUPABASE_ANON_KEY,
                    'Authorization': 'Bearer ' + SUPABASE_ANON_KEY,
                    'Prefer': 'return=minimal'
                },
                body: JSON.stringify(eventData)
            });

            if (response.ok) {
                alert('Event submitted successfully! It will be reviewed before publishing.');
                document.getElementById('eventForm').reset();
            } else {
                alert('Error submitting event. Please try again.');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('Error submitting event. Please try again.');
        }
    });
</script>
