<!DOCTYPE html>
<html>
<head>
    <title>Education Hub - GBV Safe Corner</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6A0DAD">
    
    <!-- ANALYTICS INTEGRATED -->
    <script src="analytics.js"></script>
    <script src="navigation.js"></script>
    
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: Arial, sans-serif; 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 20px; 
            background-color: #f8f8f8; 
            line-height: 1.6; 
        }
        .header { 
            background: linear-gradient(135deg, #6A0DAD, #8A2BE2);
            color: white; 
            padding: 30px; 
            text-align: center; 
            border-radius: 15px; 
            margin-bottom: 20px; 
        }
        .logo-text {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
            line-height: 1.2;
            margin-bottom: 10px;
        }
        .logo-text span {
            display: block;
        }
        
        .content-section { 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            margin: 25px 0; 
            box-shadow: 0 4px 8px rgba(106, 13, 173, 0.1);
        }
        .education-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .education-card {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 12px;
            border-left: 5px solid #6A0DAD;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .education-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(106, 13, 173, 0.15);
            border-color: #6A0DAD;
        }
        .module-section {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        .resource-button {
            background: #6A0DAD;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 6px;
            display: inline-block;
            margin: 5px;
            transition: all 0.3s ease;
            border: 2px solid #6A0DAD;
            font-weight: bold;
        }
        .resource-button:hover {
            background: #8A2BE2;
            border-color: #8A2BE2;
            transform: translateY(-2px);
        }
        .progress-tracker {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4CAF50;
        }
        .quiz-container {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
        }
        .quiz-question {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }
        .quiz-option {
            margin: 8px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .quiz-option:hover {
            background: #e8e8e8;
        }
        .quiz-option.selected {
            background: #6A0DAD;
            color: white;
        }
        .download-section {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Enhanced Emergency Exit */
        .emergency-exit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10000;
        }
        .emergency-exit-btn {
            background: #FF6B6B;
            color: white;
            padding: 12px 18px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255,0,0,0.4);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .emergency-exit-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(255,0,0,0.5);
        }
        
        /* Language Selector */
        #languageSelector {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            padding: 8px 12px;
            border-radius: 5px;
            border: 2px solid #6A0DAD;
            background: white;
            color: #6A0DAD;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #languageSelector:hover {
            background: #6A0DAD;
            color: white;
        }
        
        /* Accessibility */
        :focus {
            outline: 3px solid #6A0DAD;
            outline-offset: 2px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .education-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .education-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-text">
            <span>GBV</span>
            <span>SAFE</span>
            <span>CORNER</span>
        </div>
        <p>Education Hub</p>
    </div>

    <!-- Navigation auto-loaded here -->

    <div class="content-section">
        <h2>üéì GBV Education Hub</h2>
        <p>Comprehensive educational resources to understand, prevent, and respond to gender-based violence. Learn at your own pace with our structured modules.</p>
        
        <div class="stats-grid">
            <div class="stat-item">
                <div style="font-size: 1.5em; font-weight: bold; color: #6A0DAD;">6</div>
                <div>Learning Modules</div>
            </div>
            <div class="stat-item">
                <div style="font-size: 1.5em; font-weight: bold; color: #6A0DAD;">25+</div>
                <div>Resources</div>
            </div>
            <div class="stat-item">
                <div style="font-size: 1.5em; font-weight: bold; color: #6A0DAD;">100%</div>
                <div>Free Access</div>
            </div>
            <div class="stat-item">
                <div style="font-size: 1.5em; font-weight: bold; color: #6A0DAD;">Self-Paced</div>
                <div>Learning</div>
            </div>
        </div>

        <div class="progress-tracker">
            <h3>üìä Your Learning Progress</h3>
            <p>Track your journey through our educational modules. Your progress is saved locally on your device.</p>
            <div style="background: #e0e0e0; border-radius: 10px; height: 20px; margin: 15px 0;">
                <div id="progressBar" style="background: #6A0DAD; height: 100%; border-radius: 10px; width: 0%; transition: width 0.5s ease;"></div>
            </div>
            <p id="progressText">0% Complete - Start your learning journey</p>
        </div>
    </div>

    <div class="content-section">
        <h2>üìö Educational Modules</h2>
        <p>Explore our comprehensive learning modules designed to build your understanding of GBV step by step.</p>
        
        <div class="education-grid">
            <div class="education-card" data-module="1">
                <h3>üîç Module 1: Understanding GBV</h3>
                <p>Learn what gender-based violence is, its different forms, and how to recognize the signs.</p>
                <div class="module-section">
                    <strong>Topics Covered:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Definition and types of GBV</li>
                        <li>Power and control dynamics</li>
                        <li>Recognizing warning signs</li>
                        <li>Myths and facts about GBV</li>
                    </ul>
                </div>
                <button class="resource-button" onclick="startModule(1)">Start Module</button>
                <button class="resource-button" onclick="downloadResource('gbv-basics-guide.pdf')">Download Guide</button>
            </div>

            <div class="education-card" data-module="2">
                <h3>üõ°Ô∏è Module 2: Safety Planning</h3>
                <p>Practical strategies for creating safety plans in different situations and environments.</p>
                <div class="module-section">
                    <strong>Topics Covered:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Home safety strategies</li>
                        <li>Digital safety measures</li>
                        <li>Emergency escape planning</li>
                        <li>Safety with children</li>
                    </ul>
                </div>
                <button class="resource-button" onclick="startModule(2)">Start Module</button>
                <button class="resource-button" onclick="downloadResource('safety-planning-toolkit.pdf')">Download Toolkit</button>
            </div>

            <div class="education-card" data-module="3">
                <h3>‚öñÔ∏è Module 3: Legal Rights & Resources</h3>
                <p>Understand your legal rights, protection orders, and how to access legal support.</p>
                <div class="module-section">
                    <strong>Topics Covered:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>South African GBV laws</li>
                        <li>Protection orders process</li>
                        <li>Legal aid resources</li>
                        <li>Court procedures</li>
                    </ul>
                </div>
                <button class="resource-button" onclick="startModule(3)">Start Module</button>
                <button class="resource-button" onclick="downloadResource('legal-rights-handbook.pdf')">Download Handbook</button>
            </div>

            <div class="education-card" data-module="4">
                <h3>üí™ Module 4: Healing & Recovery</h3>
                <p>Resources and strategies for emotional healing, trauma recovery, and building resilience.</p>
                <div class="module-section">
                    <strong>Topics Covered:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Understanding trauma</li>
                        <li>Coping strategies</li>
                        <li>Building support networks</li>
                        <li>Self-care practices</li>
                    </ul>
                </div>
                <button class="resource-button" onclick="startModule(4)">Start Module</button>
                <button class="resource-button" onclick="downloadResource('healing-journey-guide.pdf')">Download Guide</button>
            </div>

            <div class="education-card" data-module="5">
                <h3>ü§ù Module 5: Supporting Others</h3>
                <p>Learn how to support friends, family members, or community members affected by GBV.</p>
                <div class="module-section">
                    <strong>Topics Covered:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Active listening skills</li>
                        <li>Appropriate responses</li>
                        <li>Boundaries in support</li>
                        <li>Referral to professionals</li>
                    </ul>
                </div>
                <button class="resource-button" onclick="startModule(5)">Start Module</button>
                <button class="resource-button" onclick="downloadResource('support-guide.pdf')">Download Guide</button>
            </div>

            <div class="education-card" data-module="6">
                <h3>üåç Module 6: Prevention & Advocacy</h3>
                <p>Strategies for preventing GBV in your community and becoming an effective advocate.</p>
                <div class="module-section">
                    <strong>Topics Covered:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Community prevention</li>
                        <li>Advocacy skills</li>
                        <li>Educational campaigns</li>
                        <li>Policy awareness</li>
                    </ul>
                </div>
                <button class="resource-button" onclick="startModule(6)">Start Module</button>
                <button class="resource-button" onclick="downloadResource('advocacy-toolkit.pdf')">Download Toolkit</button>
            </div>
        </div>
    </div>

    <div class="content-section">
        <h2>üß† Knowledge Check</h2>
        <p>Test your understanding with this interactive quiz. Your answers are not stored - this is for your learning only.</p>
        
        <div class="quiz-container">
            <div class="quiz-question">
                <p><strong>1. Which of these is NOT a form of gender-based violence?</strong></p>
                <div class="quiz-option" onclick="selectAnswer(this, 1)">Physical abuse</div>
                <div class="quiz-option" onclick="selectAnswer(this, 1)">Emotional manipulation</div>
                <div class="quiz-option" onclick="selectAnswer(this, 1)">Financial control</div>
                <div class="quiz-option correct" onclick="selectAnswer(this, 1)">Mutual disagreement in a relationship</div>
            </div>

            <div class="quiz-question">
                <p><strong>2. What is the first priority in any GBV situation?</strong></p>
                <div class="quiz-option correct" onclick="selectAnswer(this, 2)">Immediate safety of the survivor</div>
                <div class="quiz-option" onclick="selectAnswer(this, 2)">Confronting the perpetrator</div>
                <div class="quiz-option" onclick="selectAnswer(this, 2)">Documenting evidence</div>
                <div class="quiz-option" onclick="selectAnswer(this, 2)">Seeking legal advice</div>
            </div>

            <div class="quiz-question">
                <p><strong>3. Which number should you call for immediate GBV emergency help in South Africa?</strong></p>
                <div class="quiz-option" onclick="selectAnswer(this, 3)">911</div>
                <div class="quiz-option correct" onclick="selectAnswer(this, 3)">0800 428 428</div>
                <div class="quiz-option" onclick="selectAnswer(this, 3)">112</div>
                <div class="quiz-option" onclick="selectAnswer(this, 3)">10111 (Police)</div>
            </div>

            <button class="resource-button" onclick="checkQuiz()" style="margin-top: 15px;">Check Answers</button>
            <div id="quizResult" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
        </div>
    </div>

    <div class="content-section">
        <h2>üì• Download Resources</h2>
        <p>Access comprehensive educational materials that you can download and share.</p>
        
        <div class="download-section">
            <h4>Essential Guides & Toolkits</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0;">
                <div>
                    <strong>GBV Basics Guide</strong><br>
                    <button class="resource-button" onclick="downloadResource('gbv-basics-guide.pdf')">Download PDF</button>
                </div>
                <div>
                    <strong>Safety Planning Toolkit</strong><br>
                    <button class="resource-button" onclick="downloadResource('safety-planning-toolkit.pdf')">Download PDF</button>
                </div>
                <div>
                    <strong>Legal Rights Handbook</strong><br>
                    <button class="resource-button" onclick="downloadResource('legal-rights-handbook.pdf')">Download PDF</button>
                </div>
                <div>
                    <strong>Support Network Guide</strong><br>
                    <button class="resource-button" onclick="downloadResource('support-network-guide.pdf')">Download PDF</button>
                </div>
            </div>
        </div>

        <div class="download-section">
            <h4>Quick Reference Cards</h4>
            <p>Printable resources for easy access to emergency information.</p>
            <button class="resource-button" onclick="downloadResource('emergency-contacts-card.pdf')">Emergency Contacts Card</button>
            <button class="resource-button" onclick="downloadResource('safety-plan-checklist.pdf')">Safety Plan Checklist</button>
            <button class="resource-button" onclick="downloadResource('gbv-warning-signs.pdf')">Warning Signs Guide</button>
        </div>
    </div>

    <script>
        // Enhanced Security & Privacy
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.pathname);
        }
        
        // Enhanced Emergency Exit
        document.addEventListener('DOMContentLoaded', function() {
            // Create emergency exit button
            const emergencyExit = document.createElement('div');
            emergencyExit.className = 'emergency-exit';
            emergencyExit.innerHTML = `
                <button onclick="emergencyRedirect()" 
                        title="Quickly leaves this site and clears data"
                        class="emergency-exit-btn">
                    üö® Quick Exit
                </button>
            `;
            document.body.appendChild(emergencyExit);

            // Enhanced emergency redirect
            window.emergencyRedirect = function() {
                // Clear sensitive data
                localStorage.removeItem('safetyPlanProgress');
                localStorage.removeItem('educationProgress');
                sessionStorage.clear();
                document.querySelectorAll('input, textarea').forEach(element => {
                    element.value = '';
                });
                // Redirect to safe page
                window.location.href = 'https://www.google.com/search?q=weather';
            };

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' || (e.ctrlKey && e.key === 'q')) {
                    emergencyRedirect();
                }
            });
            
            // Create Language Selector
            const languageSelector = document.createElement('select');
            languageSelector.id = 'languageSelector';
            languageSelector.innerHTML = `
                <option value="en">English</option>
                <option value="zu">Zulu</option>
                <option value="xh">Xhosa</option>
                <option value="af">Afrikaans</option>
            `;
            languageSelector.onchange = (e) => changeLanguage(e.target.value);
            document.body.appendChild(languageSelector);
            
            // Initialize language
            const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
            changeLanguage(savedLanguage);
            
            // Load education progress
            loadEducationProgress();
            
            // ANALYTICS TRACKING - INTEGRATED
            if (typeof analytics !== 'undefined') {
                analytics.trackPageView('education-hub.html');
                analytics.trackFeatureUse('education_hub_loaded');
            }
        });
        
        // Language Support
        const translations = {
            en: {
                'home': 'Home',
                'report': 'Report',
                'support': 'Support',
                'stories': 'Stories',
                'library': 'Resources',
                'community': 'Community',
                'events': 'Events',
                'about': 'About',
                'safety': 'Safety',
                'assessment': 'Risk Check',
                'education': 'Education',
                'login': 'Admin'
            },
            zu: {
                'home': 'Ikhaya',
                'report': 'Bika',
                'support': 'Usizo',
                'stories': 'Izindaba',
                'library': 'Izinsiza',
                'community': 'Umphakathi',
                'events': 'Imicimbi',
                'about': 'Mayelana',
                'safety': 'Ukuphepha',
                'assessment': 'Ukuhlola',
                'education': 'Imfundo',
                'login': 'Admin'
            },
            xh: {
                'home': 'Ekhaya',
                'report': 'Xela',
                'support': 'Uncedo',
                'stories': 'Iimbali',
                'library': 'Iindlela',
                'community': 'Uluntu',
                'events': 'Iivenkile',
                'about': 'Malunga',
                'safety': 'Ukhuseleko',
                'assessment': 'Uvavanyo',
                'education': 'Imfundo',
                'login': 'Admin'
            },
            af: {
                'home': 'Tuis',
                'report': 'Rapporteer',
                'support': 'Ondersteuning',
                'stories': 'Stories',
                'library': 'Hulpbronne',
                'community': 'Gemeenskap',
                'events': 'Gebeure',
                'about': 'Oor',
                'safety': 'Veiligheid',
                'assessment': 'Risiko',
                'education': 'Onderrig',
                'login': 'Admin'
            }
        };

        let currentLanguage = 'en';

        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('preferredLanguage', lang);
            applyTranslations();
            updateLanguageSelector();
        }

        function applyTranslations() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }

        function updateLanguageSelector() {
            const selector = document.getElementById('languageSelector');
            if (selector) {
                selector.value = currentLanguage;
            }
        }

        // Education Progress Tracking
        function loadEducationProgress() {
            const progress = JSON.parse(localStorage.getItem('educationProgress') || '{}');
            let completedModules = 0;
            const totalModules = 6;

            // Check which modules are completed
            for (let i = 1; i <= totalModules; i++) {
                if (progress[`module_${i}`]) {
                    completedModules++;
                    // Mark module as completed in UI
                    const moduleCard = document.querySelector(`[data-module="${i}"]`);
                    if (moduleCard) {
                        moduleCard.style.background = '#e8f5e8';
                        moduleCard.style.borderLeftColor = '#4CAF50';
                    }
                }
            }

            // Update progress bar
            const progressPercentage = (completedModules / totalModules) * 100;
            document.getElementById('progressBar').style.width = `${progressPercentage}%`;
            
            let progressText = '';
            if (completedModules === 0) {
                progressText = '0% Complete - Start your learning journey';
            } else if (completedModules === totalModules) {
                progressText = '100% Complete - Congratulations! üéâ';
            } else {
                progressText = `${Math.round(progressPercentage)}% Complete - ${completedModules}/${totalModules} modules finished`;
            }
            document.getElementById('progressText').textContent = progressText;
        }

        function startModule(moduleNumber) {
            // Mark module as started
            const progress = JSON.parse(localStorage.getItem('educationProgress') || '{}');
            progress[`module_${moduleNumber}`] = true;
            localStorage.setItem('educationProgress', JSON.stringify(progress));
            
            // Update UI
            loadEducationProgress();
            
            // Show module content (in a real implementation, this would navigate to module page)
            alert(`Starting Module ${moduleNumber}. In a full implementation, this would open the module content.`);
            
            // ANALYTICS TRACKING
            if (typeof analytics !== 'undefined') {
                analytics.trackFeatureUse(`module_${moduleNumber}_started`);
            }
        }

        function downloadResource(filename) {
            // Simulate download (in real implementation, this would serve actual files)
            alert(`Downloading ${filename}. In a full implementation, this would download the actual file.`);
            
            // ANALYTICS TRACKING
            if (typeof analytics !== 'undefined') {
                analytics.trackFeatureUse(`resource_download_${filename.replace('.pdf', '')}`);
            }
        }

        // Quiz functionality
        let selectedAnswers = {};

        function selectAnswer(element, questionNumber) {
            // Remove selection from other options in same question
            const question = element.parentElement;
            const options = question.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Select clicked option
            element.classList.add('selected');
            selectedAnswers[questionNumber] = element;
        }

        function checkQuiz() {
            let correctAnswers = 0;
            const totalQuestions = 3;

            // Check each question
            for (let i = 1; i <= totalQuestions; i++) {
                if (selectedAnswers[i] && selectedAnswers[i].classList.contains('correct')) {
                    correctAnswers++;
                }
            }

            // Display results
            const resultDiv = document.getElementById('quizResult');
            const score = Math.round((correctAnswers / totalQuestions) * 100);
            
            let resultHTML = '';
            if (score === 100) {
                resultHTML = `<div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 8px;">
                    <h4>üéâ Excellent! ${score}%</h4>
                    <p>You have a strong understanding of GBV concepts. Keep learning and sharing your knowledge!</p>
                </div>`;
            } else if (score >= 70) {
                resultHTML = `<div style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 8px;">
                    <h4>üëç Good Job! ${score}%</h4>
                    <p>You have a good understanding. Review the modules to strengthen your knowledge.</p>
                </div>`;
            } else {
                resultHTML = `<div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 8px;">
                    <h4>üìö Keep Learning! ${score}%</h4>
                    <p>Review the educational modules to improve your understanding of GBV concepts.</p>
                </div>`;
            }

            resultDiv.innerHTML = resultHTML;
            resultDiv.style.display = 'block';

            // ANALYTICS TRACKING
            if (typeof analytics !== 'undefined') {
                analytics.trackFeatureUse('quiz_completed');
                analytics.trackFeatureUse(`quiz_score_${score}`);
            }
        }

        // Add interactive module tracking
        document.addEventListener('DOMContentLoaded', function() {
            // Track module card views
            document.querySelectorAll('.education-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    const moduleNum = this.getAttribute('data-module');
                    if (typeof analytics !== 'undefined') {
                        analytics.trackFeatureUse(`module_${moduleNum}_viewed`);
                    }
                });
            });
        });
    </script>
</body>
</html>
